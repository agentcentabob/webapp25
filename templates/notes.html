{% extends 'layout.html' %} 
{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/notes.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/easymde.min.css') }}">
    <title>Note editor - URBANNOTES</title>
    <script src="{{ url_for('static', filename='js/easymde.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/address-autocomplete.js') }}" defer></script>
{% endblock %}
{% block content %}
<body>
    <form method="POST" id="noteForm">
        <div class="note-editor-container">
            <div class="editor-header">
                <div class="header-left">
                    <input type="text" 
                        class="note-title-input" 
                        id="noteTitle"
                        name="title"
                        placeholder="Untitled Note"
                        value="{{ note_title if note_title else '' }}">

                    <div class="address-input-wrapper">
                        <input type="text" 
                            class="note-address-input" 
                            id="noteAddress"
                            name="address"
                            placeholder="üìç Location (e.g., Sydney CBD, Bondi Beach)"
                            value="{{ note_address if note_address else '' }}">
                    </div>
                </div>

                <div class="header-right">
                    <button type="submit" class="action-btn save">Save</button>
<!--                    {% if note_id %}
                    <button type="button" class="action-btn delete" id="deleteBtn">üóëÔ∏è Delete</button>
                    {% endif %}-->
                </div>
            </div>

            <div class="editor-body" id="editorBody">
                <textarea id="noteContent" name="content">{{ note_content if note_content else '' }}</textarea>
            </div>

            <div class="editor-footer">
                <div class="markdown-hint">
                    Markdown editing supported | Auto-saves every 2 seconds
                </div>
                <br>
                <div class="last-saved not-saved" id="lastSaved">
                    {% if note_id %}‚úÖ Loaded{% else %}‚ùå Not saved yet{% endif %}
                </div>
            </div>
        </div>
    </form>

    {% if note_id %}
    <form method="POST" action="{{ url_for('delete_note', note_id=note_id) }}" id="deleteForm" style="display:none;">
    </form>
    {% endif %}

    <script src="{{ url_for('static', filename='js/notes.js') }}"></script>
</body>
{% endblock %}